<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Inscripciones</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#111827;
  color:white;
  margin:20px;
}

h1{
  font-size:22px;
  margin-bottom:20px;
}

.card{
  background:#1f2937;
  padding:15px;
  border-radius:10px;
  margin-bottom:12px;
}

.line{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:6px;
}

.small{
  font-size:14px;
  opacity:0.8;
}

.progress{
  background:#374151;
  height:8px;
  border-radius:6px;
  overflow:hidden;
  margin-top:8px;
}

.bar{
  height:100%;
  background:#10b981;
}
</style>
</head>

<body>

<h1>Inscripciones</h1>
<div id="contenedor">Cargando datos...</div>

<script>
const csvURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ2avA92LvHh37HuCigjLogbT2hhoLprim9OJu7tI9Do2jU6u1hnEsrMov5UKpJHqNcx9fNESB2W3d4/pub?output=csv";

fetch(csvURL)
.then(res => res.text())
.then(data => {
  const filas = data.split("\n").slice(1); // salta encabezado
  const cont = document.getElementById("contenedor");
  cont.innerHTML = "";

  filas.forEach(f => {
    const c = f.split(",");

    const fecha = c[1] || "";
    const hora = c[2] || "";
    const sede = c[3] || "";
    const area = c[4] || "";
    const cupo = parseInt(c[5]) || 0;
    const insc = parseInt(c[6]) || 0;

    const porcentaje = cupo > 0 ? Math.round((insc / cupo) * 100) : 0;

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div class="line">
        <div><strong>${fecha}</strong> ${hora}</div>
        <div class="small">${sede}</div>
      </div>

      <div class="line">
        <div>${area}</div>
        <div>${insc} / ${cupo}</div>
      </div>

      <div class="progress">
        <div class="bar" style="width:${porcentaje}%"></div>
      </div>

      <div class="small">${porcentaje}% ocupaci√≥n</div>
    `;

    cont.appendChild(card);
  });
})
.catch(() => {
  document.getElementById("contenedor").innerText = "Error cargando el CSV.";
});
</script>

</body>
</html>
